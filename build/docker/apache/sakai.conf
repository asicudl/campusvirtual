# This needs a host called app which we talk to over AJP

ServerName localhost

<IfModule !ssl_module>
<VirtualHost *:80>

    ### Redirecci贸 de l'eina de preinscripci贸 ###

    ProxyPass /portal/tool/3abc0a99-0a58-4d21-8047-61021debdfc8/main !
    Redirect /portal/tool/3abc0a99-0a58-4d21-8047-61021debdfc8/main http://%{SERVER_NAME}/portal/tool/7b2d01e6-7335-48f1-b7cc-003495be6078/StartPage.jsp?sakai.tool.placement.id=7b2d01e6-7335-48f1-b7cc-003495be6078

    ### Redireccio de l'eina de correu obert ###

    ProxyPass /portal/site/correuobert !
    Redirect /portal/site/correuobert http://www.udl.cat/ca/serveis/oqua/qualitat/correuobert/

    ### NO redireccionament guiadocent per evitar problema de HTTP ###
    RewriteRule /guiadocent/(.*) http://guiadocent.udl.cat/$1 [P]


    ### Unset the X-FRAME-OPTIONS to make possible the inclusion of some apps in the page of the university ###
    Header unset X-Frame-Options

    ### Define the balancer proxy point ###
    ProxyPass / balancer://sakai/
    ProxyPassReverse / balancer://sakai/
   </VirtualHost>
</IfModule>

<IfModule ssl_module>
<VirtualHost *:80>
    #Redirect any traffic to the https.
    RewriteEngine on
    RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [L,R=301,NE]
</VirtualHost>

<VirtualHost *:443>

    SSLEngine on
    SSLCertificateFile      /etc/ssl/certs/ssl-public.crt
    SSLCertificateKeyFile   /etc/ssl/private/ssl-private.key
    SSLCertificateChainFile /etc/ssl/certs/ssl-chain.crt.pem

    ### Redirecci贸 de l'eina de preinscripci贸 ###

    ProxyPass /portal/tool/3abc0a99-0a58-4d21-8047-61021debdfc8/main !
    Redirect /portal/tool/3abc0a99-0a58-4d21-8047-61021debdfc8/main https://%{SERVER_NAME}/portal/tool/7b2d01e6-7335-48f1-b7cc-003495be6078/StartPage.jsp?sakai.tool.placement.id=7b2d01e6-7335-48f1-b7cc-003495be6078

    ### Redireccio de l'eina de correu obert ###

    ProxyPass /portal/site/correuobert !
    Redirect /portal/site/correuobert http://www.udl.cat/ca/serveis/oqua/qualitat/correuobert/

    ### NO redireccionament guiadocent per evitar problema de HTTP ###
    RewriteRule /guiadocent/(.*) http://guiadocent.udl.cat/$1 [P]


    ### Unset the X-FRAME-OPTIONS to make possible the inclusion of some apps in the page of the university ###
    Header unset X-Frame-Options

    ### Define the balancer proxy point ###
    ProxyPass / balancer://sakai/
    ProxyPassReverse / balancer://sakai/

</VirtualHost>
</IfModule>


# Activate in order to see debug messages
# LogLevel Debug

